# Handle git submodules yourself
git:
    submodules: false

language: python
python:
  "3.6"

before_install:
    # Use sed to replace the SSH URL with the public URL, then initialize submodules
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule update --init --recursive
  - nvm install stable
  - nvm use stable
  - pip install -r requirements.txt
  - pip install pytest-sugar

script:
  - make
  - make test

deploy:
  skip_cleanup: true
  provider: script
  script: python src/upload.py
  on:
    branch: master
